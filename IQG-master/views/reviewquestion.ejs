<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IQG</title>

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
      <link href="stylesheets/w3.css" rel="stylesheet">
      <script type="text/javascript" src="javascript/scripts.js"></script>
      <script type="text/javascript" src="javascript/routes.js"></script>
    
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="javascript/antixss.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    
</head>




<body style="background-color:rgb(233,231,218);"  ng-app="myApp" ng-controller="myCtrl">


<!-- Nav Bar -->
<div style="background-color:rgb(118,50,63);" class="w3-bar">
  <label style="font-family:Courier; font-size:18px; color:rgb(233,231,218);" class="w3-left w3-bar-item ">Signed in as <span id="userNameSpan"></span></label>
  <a href="/" id="logoutButton" class="w3-right w3-btn w3-bar-item"><img src='images/logout-icon.png'></a>
  <button id="myQuestButton" style="font-family:Courier; font-size:18px; color:rgb(233,231,218); text-align:center;" class="w3-right w3-btn w3-bar-item"><b>My Questions</b></button>   
</div> 
<!-- End Nav Bar -->

<script>
    $('#userNameSpan').html('<%= name %>');
</script>






<div class="w3-container"> 

<br>

<button onclick="goBack()" id="backButton" style="background-color:rgb(118,50,63); color:rgb(205,216,199); text-align:center;" class=" w3-btn w3-round ">&#8592; Back</button>

<br>
 <header style="color:rgb(86,86,86);" class="w3-margin-top w3-container w3-xxlarge">Review your Questions</header>
<br>


<h2 style="color:rgb(86,86,86);"  ><b>Advanced Search</b></h2>
<br>
<br>


<span style="float: left; width:150px; color:rgb(118,50,63);" ><b>Question Name:</b></span> <input  ng-model="search.name">

<span  style="  width:150px; color:rgb(118,50,63); " ><b>Adder's Email:</b></span><input  ng-model="search.adderid">
<br>
<br>
<span style=" float: left; width:150px; color:rgb(118,50,63);"  ><b>  Category:  </b> </span> <input  ng-model="search.category">

<span style=" width:150px; color:rgb(118,50,63); " ><b>SubCategory: </b></span> <input  ng-model="search.subcategory">
<br>
<br>

<br>
<br>



<table class="w3-table w3-bordered w3-striped">
<col width="100">
  <col width="100">
  <tr>
    <th class="w3-center" style="color:rgb(118,50,63);">Edit</th>
    <th class="w3-center" style="color:rgb(118,50,63);">View</th>
    <th class="w3-center" style="color:rgb(118,50,63);">Question Description</th>
    <th class="w3-center" style="color:rgb(118,50,63);">Question Category</th>
    <th class="w3-center" style="color:rgb(118,50,63);">Question SubCategory</th>
    <th  class="w3-center" style="color:rgb(118,50,63);">Adder Contact</th>
  </tr>
  <tr ng-repeat="x in find | filter:search ">
  <td class="w3-btn w3-ripple w3-center" ng-click="editQuestionpage(x._id)" >&#9998; Edit</td>
  <td class="w3-btn w3-ripple w3-center" ng-click="viewQuestionpage(x._id)" >&#128065; View</td>
    <td class="w3-center">{{ x.name }}</td>
    <td class="w3-center">{{ x.category }}</td>
    <td class="w3-center">{{ x.subcategory }}</td>
    <td class="w3-center">{{ x.adderid }}</td>
  </tr>
</table>


<br>
<br>
<br>






<script>
/*

$('#declinemessage').hide();

function showDeclinemsg()
{
	$('#declinemessage').show();
	$('#Viewhideform').hide();
}







function updateQuestion()

{
	var id=$('#editid').val();
	var rev=$('#editrevid').val();
	var name = $('#editname').val();
	var op1= $('#editop1').val();
	var op2= $('#editop2').val();
	var op3= $('#editop3').val();
	var op4= $('#editop4').val();
	var modelanswer=$('#editmodelanswer').val();
	var category=$('#editcategory').val();
	var subcategory=$('#editsubcategory').val();
	var qlevel=$('#editqlevel').val();
	var estime=$('#editestime').val();
	var adderid=$('#editadderid').val();
	var reviewerid='<%= email %>';
	var status="pending";
	var comment=$('#editcomment').val();
	var repetition=0;
	var type="question";
	var adderemail=$('#editadderid').val();
	var revieweremail='<%= email %>';
	var currentTime = new Date();
	var month = currentTime.getMonth() + 1;
	var day = currentTime.getDate();
	var year = currentTime.getFullYear();
	var date= day+"/"+month+"/"+year;
	
	
	 $.ajax({
		  method: "POST",
		  url: "./api/updateQuestion",
		  contentType: "application/json",
		  data: JSON.stringify({"id":id,"rev":rev,"name" : name,"op1": op1,"op2":op2,"op3":op3,"op4":op4,"modelanswer":modelanswer,"category":category,"subcategory":subcategory,"qlevel":qlevel,"estime":estime,"adderid":adderid,"reviewerid":reviewerid,"status":status,"comment":comment,"rep":repetition,"type":type,"adderemail":adderemail,"revieweremail":revieweremail,"date":date})
       })	 
       .done(function(data) {
    	   alert("Question is updated successfully");
    	   returnHomepage();
        });
		
}
*/

/*

function acceptQuestion()

{
	var id=$('#id').val();
	var rev=$('#revid').val();
	var name =document.getElementById("name").innerHTML;
	var op1= document.getElementById("op1").innerHTML;
	var op2= document.getElementById("op2").innerHTML;
	var op3= document.getElementById("op3").innerHTML;
	var op4= document.getElementById("op4").innerHTML;
	var modelanswer=document.getElementById("modelanswer").innerHTML;
	var category= document.getElementById("category").innerHTML;
	var subcategory=document.getElementById("subcategory").innerHTML;
	var qlevel= document.getElementById("qlevel").innerHTML;
	var estime= document.getElementById("estime").innerHTML;
	var adderid=$('#adderid').val();
	var reviewerid='<%= email %>';
	var status="accepted";
	var comment=document.getElementById("comment").innerHTML; 
	var repetition=0;
	var adderemail=$('#adderid').val();
	var revieweremail='<%= email %>';
	

	 $.ajax({
		  method: "POST",
		  url: "./api/acceptQuestion",
		  contentType: "application/json",
		  data: JSON.stringify({"id":id,"rev":rev,"name" : name,"op1": op1,"op2":op2,"op3":op3,"op4":op4,"modelanswer":modelanswer,"category":category,"subcategory":subcategory,"qlevel":qlevel,"estime":estime,"adderid":adderid,"reviewerid":reviewerid,"status":status,"comment":comment,"rep":repetition,"adderemail":adderemail,"revieweremail":revieweremail})
       })	 
       .done(function(data)
       {
    	   alert("Question is accepted ");
    	   returnHomepage();
        });
		
}
*/


/*

function declineQuestion()

{
	var id=$('#id').val();
	var rev=$('#revid').val();
	var name =document.getElementById("name").innerHTML;
	var adderemail=$('#adderid').val();
	var revieweremail='<%= email %>';
	var message=$('#message').val();
	
	 $.ajax({
		  method: "POST",
		  url: "./api/declineQuestion",
		  contentType: "application/json",
		  data: JSON.stringify({"id":id,"rev":rev,"name":name,"adderemail":adderemail,"revieweremail":revieweremail})
       })	 
       .done(function(data)
       {
    	   alert("Question is deleted successfully ");
    	   returnHomepage();
        });
		
}



*/



var app = angular.module('myApp', []);

app.controller('myCtrl', function($scope, $http) {
	
	$scope.name= '';
	$scope.op1 = '';
	$scope.op2 = '';
	$scope.op3 = '';
	$scope.op4 = '';
	$scope.modelanswer = '';
	$scope.category = '';
	$scope.subcategory = '';
	$scope.qlevel = '';
	$scope.estime = '';
	$scope.comment = '';
	$scope.userEmail = '<%= email %>';
	$http({ url: "/api/findquestions",  method: "GET", params: {"userEmail": $scope.userEmail}}).then(function (response) { $scope.find = response.data;});
	

	/*
  	$scope.edit = false;
	$scope.error = false;
	$scope.Edithideform = true;	
	$scope.Viewhideform = true;	
	$scope.Addoption=true;
	
	$scope.EditrevID=true;
	$scope.EditID = true;	
	$scope.EditadderID = true;
	
	
	
	$http.get("/api/findcategory").then(function (response) { $scope.findcategory = response.data;});
	 $scope.changesubcategory = function()
	  {
			 $http({ url: "/api/findsubcategory",  method: "GET", params: {"categoryname": $scope.editcategory}}).then(function (response) { $scope.findsubcategory = response.data;});
			 $scope.subcategorycontainer=false;
	  }
	
	
	$scope.editUser = function(id) 
	{
		
		$scope.editname= '';
		$scope.editop1 = '';
		$scope.editop2 = '';
		$scope.editop3 = '';
		$scope.editop4 = '';
		$scope.editmodelanswer = '';
		$scope.editcategory = '';
		$scope.editsubcategory = '';
		$scope.editqlevel = '';
		$scope.editestime = '';
		$scope.editcomment = '';
		
	    $scope.Edithideform = false;
	    $scope.Viewhideform = true;	
	    for(var i=0;i<$scope.find.length;i++)
	    {
	    	
	    	if($scope.find[i]._id == id)
	    		{
		    		$scope.editname = $scope.find[i].name;
		    	    $scope.editop1 = $scope.find[i].op1;
		    	    $scope.editop2 = $scope.find[i].op2;
		    	    $scope.editop3 = $scope.find[i].op3;
		    	    $scope.editop4 = $scope.find[i].op4;
		    	    $scope.editid=$scope.find[i]._id;
		    	    $scope.editrevid=$scope.find[i]._rev;
		    	    $scope.editadderid=$scope.find[i].adderid;
		    	    $scope.editmodelanswer=$scope.find[i].modelanswer;
		    	    $scope.editcategory=$scope.find[i].category;
		    	    $scope.editsubcategory=$scope.find[i].subcategory;
		    	    $scope.editqlevel=$scope.find[i].qlevel;
		    	    $scope.editestime=$scope.find[i].estime;
		    	    $scope.editcomment=$scope.find[i].comment;
		    	    
	    		}
	    }	
	    
	    
	    $http({ url: "/api/findsubcategory",  method: "GET", params: {"categoryname": $scope.editcategory}}).then(function (response) { $scope.findsubcategory = response.data;});
		
	    // for option list 
	    	if ($scope.editop3 !="" && $scope.editop4 =="")
	    	{
	    	 	$scope.optionmodelanswer=[$scope.editop1,$scope.editop2,$scope.editop3,]
	    	 	$scope.editoption4=true;
	    	 	$scope.editoption3=false;
	    	 	$scope.editoption1=false;
	    	 	$scope.editoption2=false;
	    	 	$scope.Addoption=false;
	    	 	
	    	}
	    	
	    
	    
	    	else if ($scope.editop4 !="")
	    	{
		    	$scope.optionmodelanswer=[$scope.editop1,$scope.editop2,$scope.editop3,$scope.editop4,]
		    	$scope.editoption4=false;
	    	 	$scope.editoption3=false;
	    	 	$scope.editoption1=false;
	    	 	$scope.editoption2=false;
	    	 	$scope.Addoption=true;
	    	 	
	    	}
	    
	    
	    	else if($scope.editop1 !="" && $scope.editop2 !="" && $scope.editop3=="" && $scope.editop4 =="" )
	    	{
	    		$scope.optionmodelanswer=[$scope.editop1,$scope.editop2,]
	    		$scope.editoption4=true;
	    	 	$scope.editoption3=true;
	    	 	$scope.editoption1=false;
	    	 	$scope.editoption2=false;
	    	 	$scope.Addoption=false;
	    	}
	    
	    
	};

*/
	 $scope.editQuestionpage=function(id)
	   {
		   $http({ url: "/api/findviewid",  method: "GET", params:{"id":id}});
		   document.location="editquestion";
			
	   }
		
	
	
	
   $scope.viewQuestionpage=function(id)
   {
	   $http({ url: "/api/findviewid",  method: "GET", params:{"id":id}});
	   document.location="viewquestion";
		
   }
});
	/*
	
	$scope.viewUser=function(id)
	{

		
		
	    $scope.Viewhideform = false;
	    $scope.Edithideform = true;	
	    for(var i=0;i<$scope.find.length;i++)
	    {
	    	
	    	if($scope.find[i]._id == id)
	    		{
		    		$scope.name = $scope.find[i].name;
		    	    $scope.op1 = $scope.find[i].op1;
		    	    $scope.op2 = $scope.find[i].op2;
		    	    $scope.op3 = $scope.find[i].op3;
		    	    $scope.op4 = $scope.find[i].op4;
		    	    $scope.modelanswer=$scope.find[i].modelanswer;
		    	    $scope.category=$scope.find[i].category;
		    	    $scope.subcategory=$scope.find[i].subcategory;
		    	    $scope.qlevel=$scope.find[i].qlevel;
		    	    $scope.estime=$scope.find[i].estime;
		    	    $scope.comment=$scope.find[i].comment;
		    	    $scope.id=$scope.find[i]._id;
		    	    $scope.revid=$scope.find[i]._rev;
		    	    $scope.adderid=$scope.find[i].adderid;
	    		}
	    }	
	};
	
	
	
	if(!$scope.op3.length )
	   $scope.op3hide=true;
	
	if(!$scope.op4.length )
		   $scope.op4hide=true;
	
	
	 $scope.hideoption1 = function() 
	 {
		 
		 if ($scope.editoption2)
			 {
			 	$scope.editop1='';
			 	$scope.editoption1=true;
			 	$scope.Addoption=false;
			 }
		 
		 else if(!$scope.editoption2 && $scope.editoption3 && $scope.editoption4)
			 {
			 	$scope.editop1=$scope.editop2;
			 	$scope.editop2='';
			 	$scope.editoption2=true;
			 	$scope.Addoption=false;
			 }
		 else if (!$scope.editoption2 && !$scope.editoption3 && $scope.editoption4)
			 {
			 	$scope.editop1=$scope.editop2;
			 	$scope.editop2=$scope.editop3;
			 	$scope.editop3='';
			 	$scope.editoption3=true;
			 	$scope.Addoption=false;
			 	
			 }
		 else if (!$scope.editoption2 && !$scope.editoption3 && !$scope.editoption4)
			 {
			 	$scope.editop1=$scope.editop2;
			 	$scope.editop2=$scope.editop3;
			 	$scope.editop3=$scope.editop4;
			 	$scope.editop4='';
			 	$scope.editoption4=true;
			 	$scope.Addoption=false;
			 }
		 
		 
	 };
	
	
	 $scope.hideoption2 = function() 
	 {
		
		if(!$scope.editoption1 && $scope.editoption3 && $scope.editoption4)
			{
				$scope.editop2='';
				$scope.editoption2=true;
				$scope.Addoption=false;
			}
		
		else if (!$scope.editoption1 && !$scope.editoption3 && $scope.editoption4)
			{
				$scope.editop2=$scope.editop3;
				$scope.editop3='';
				$scope.editoption3=true;
				$scope.Addoption=false;
			}
		
		else if (!$scope.editoption1 && !$scope.editoption3 && !$scope.editoption4)
			{
				$scope.editop2=$scope.editop3;
				$scope.editop3=$scope.editop4;
				$scope.editop4='';
				$scope.editoption4=true;
				$scope.Addoption=false;
			}
		
	 };
	 
	 $scope.hideoption3 = function() 
	 {
		
		 if(!$scope.editoption1 && !$scope.editoption2 && $scope.editoption4)
			 {
			   $scope.editop3='';
			   $scope.editoption3=true;
			   $scope.Addoption=false;
			  
			 }
		 
		 else if(!$scope.editoption1 && !$scope.editoption2 && !$scope.editoption4)
			 {
			 	$scope.editop3=$scope.editop4;
			 	$scope.editop4='';
			 	$scope.editoption4=true;
			 	$scope.Addoption=false;
			 }
		 
		 
	 };
	 
	 $scope.hideoption4 = function() 
	 {
		 $scope.editop4='';
		 $scope.editoption4=true;
		 $scope.Addoption=false;
	 };
	 
	 
	 $scope.Addoptionbutton=function()
	 {
		 if($scope.editoption1)
			 $scope.editoption1=false;
		 else if(!$scope.editoption1 && $scope.editoption2)
			 $scope.editoption2=false;
		 else if (!$scope.editoption1  && !$scope.editoption2  && $scope.editoption3  )
			 $scope.editoption3=false;
		 else if (!$scope.editoption1  && !$scope.editoption2  && !$scope.editoption3   && $scope.editoption4 )
			 {
				 $scope.editoption4=false;
				 $scope.Addoption=true;
			 }
		 
	 };
	 
	 
	 
	 
	$scope.$watch('editname', function() {$scope.test();});
	$scope.$watch('editop1', function() {$scope.watchoption();});
	$scope.$watch('editop2', function() {$scope.watchoption();});
	$scope.$watch('editop3', function() {$scope.watchoption();});
	$scope.$watch('editop4', function() {$scope.watchoption();});
	$scope.$watch('editmodelanswer', function() {$scope.test();});
	$scope.$watch('editcategory', function() {$scope.test();});
	$scope.$watch('editsubcategory', function() {$scope.test();});
	$scope.$watch('editqlevel', function() {$scope.test();});
	$scope.$watch('editestime', function() {$scope.test();});
	
	
	
	
	
	
	
	$scope.watchoption=function()
	{
		$scope.incomplete=false;
		
		if ( $scope.editop1.length && !$scope.editop2.length &&  !$scope.editop3.length && !$scope.editop4.length)
			$scope.optionmodelanswer=[$scope.editop1,]
		else if ( $scope.editop1.length && $scope.editop2.length &&  $scope.editop3.length && !$scope.editop4.length)
	    	 $scope.optionmodelanswer=[$scope.editop1,$scope.editop2,$scope.editop3,]
		
	    else if($scope.editop1.length && $scope.editop2.length && !$scope.editop3.length && !$scope.editop4.length)
	    		$scope.optionmodelanswer=[$scope.editop1,$scope.editop2,]
	    
	    else if ($scope.editop1.length && $scope.editop2.length && $scope.editop3.length && $scope.editop4.length)
	    	  $scope.optionmodelanswer=[$scope.editop1,$scope.editop2,$scope.editop3,$scope.editop4,]
		
	    else 
	    	$scope.optionmodelanswer=[]
		
		if( !$scope.editop1.length ||  !$scope.editop2.length )
			{$scope.incomplete = true;}
		
		if(!$scope.editop1.length )
			$scope.editbuttonOne=true;
		else
			$scope.editbuttonOne=false;
			
		if(!$scope.editop2.length )
			$scope.editbuttonTwo=true;
		else
			$scope.editbuttonTwo=false;
		
		if(!$scope.editop3.length )
			$scope.editbuttonThree=true;
		else
			$scope.editbuttonThree=false;
		
		if(!$scope.editop4.length )
			$scope.editbuttonFour=true;
		else
			$scope.editbuttonFour=false;
		
	};
	
	
	
	
	$scope.test = function() {
	 
	  $scope.incomplete = false;
	  
	
	  if ( !$scope.editname.length ||!$scope.editop1.length ||  !$scope.editop2.length|| $scope.editmodelanswer==null || !$scope.editcategory.length || !$scope.editsubcategory.length ||!$scope.editqlevel.length || !$scope.editestime.length)
	  {$scope.incomplete = true;}
	  
	  
	};
});

*/

</script>

</body>
</html>



